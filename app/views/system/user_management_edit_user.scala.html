@(r: play.mvc.Http.Request, u: utils.Utils, page_settings: utils.app.page.PageSettings, user: models.db.user.User, all_roles: List[models.db.user.Role], form_result: utils.app.page.FormSubmissionResult)

@import models.db.user.User.MAX_SIZE_NAME
@import models.db.user.User.MAX_SIZE_USERNAME
@import models.db.user.User.MAX_SIZE_EMAIL
@import models.helpers.user.UserHelper.NAME
@import models.helpers.user.UserHelper.USERNAME
@import models.helpers.user.UserHelper.EMAIL
@import models.helpers.user.UserHelper.ROLES


@base.bo_body(r, u, u.l.l(r, "system.title.edit_user"), page_settings) { } {

	<div class="container-fluid">

	  	<h1>@u.l.l(r, "system.title.edit_user")</h1>

		@base.form_result(r, u.l, form_result)

	  	@if(user == null){
	  		<p class="danger-fg-color"><b>@u.l.l(r, "error.label.unexpected_error")</b></p>
	  		<p class="alert alert-danger">@u.l.l(r, "error.text.unexpected_error"): @u.l.l(r, "general.text.user_not_found")</p>
	  	}else{
			<form class="validate-form" action="@controllers.bo.routes.BackofficeSystemController.submitEditUserForm(user.getID())" method="post">
				@helper.CSRF.formField(r.asScala)

				<div class="row mb-3">
					<div class="col-3">
						<div class="form-group">
							<label for="@(USERNAME)">@u.l.l(r, "user.label.username")</label>
							<input type="text" name="@(USERNAME)" id="@(USERNAME)" class="form-control validate-not-empty validate-blur" value="@user.getUsername()" />
						</div>
					</div>

					<div class="col-3">
						<div class="form-group">
							<label for="@(EMAIL)">E-Mail</label>
							<input type="email" name="@(EMAIL)" id="@(EMAIL)" class="form-control validate-not-empty validate-blur" value="@user.getEmail()" />
						</div>
					</div>

					<div class="col-6">
						<div class="form-group">
							<label for="@(NAME)">@u.l.l(r, "user.label.name")</label>
							<input type="text" name="@(NAME)" id="@(NAME)" class="form-control validate-not-empty validate-blur" value="@user.getName()" />
						</div>
					</div>

					<div class="col">
						<div class="mt-3 mb-3">
							<div><b>@u.l.l(r, "user.label.possible_roles")</b></div>
							<div>
								@if(all_roles != null){
									@for(role <- all_roles){
										<div class="form-check form-check-inline">
											<input type="checkbox" class="form-check-input" name="@(ROLES)[]" id="@(ROLES + role.getID())" @if(user.canHaveRole(role)){ checked } value="@(role.getID())">
											<label class="form-check-label" for="@(ROLES + role.getID())">@u.l.lto(r, role, "getLabel")</label>
										</div>
									}
								}
							</div>
						</div>
					</div>
				</div>

				<button class="btn btn-success" type="submit"><i class="fa fa-check-circle"></i> @u.l.l(r, "general.label.save")</button>
				<a href="@controllers.bo.routes.BackofficeSystemController.renderUser(user.getID())" class="btn btn-danger"><i class="fa fa-times-circle"></i> @u.l.l(r, "general.label.cancel")</a>
			</form>
	  	}

	</div>
} { }
